{% extends 'base.html' %}

{% block title %}Business {{ business.business_name }} - Minibini{% endblock %}

{% block content %}
<h2>Business: {{ business.business_name }}</h2>

<table border="1">
    <tr>
        <th>Field</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Business ID</td>
        <td>{{ business.business_id }}</td>
    </tr>
    <tr>
        <td>Business Name</td>
        <td>{{ business.business_name }}</td>
    </tr>
    <tr>
        <td>Reference Code</td>
        <td>{{ business.our_reference_code|default:"No reference code" }}</td>
    </tr>
    <tr>
        <td>Business Number</td>
        <td>{{ business.business_number|default:"No business number" }}</td>
    </tr>
    <tr>
        <td>Address</td>
        <td>{{ business.business_address|default:"No address" }}</td>
    </tr>
    <tr>
        <td>Tax Exemption Number</td>
        <td>{{ business.tax_exemption_number|default:"No tax exemption number" }}</td>
    </tr>
    <tr>
        <td>Tax Cloud</td>
        <td>{{ business.tax_cloud|default:"No tax cloud" }}</td>
    </tr>
    <tr>
        <td>Payment Terms</td>
        <td>{{ business.terms|default:"No payment terms" }}</td>
    </tr>
</table>

<h3>Associated Contacts</h3>
<a href="{% url 'contacts:add_business_contact' business.business_id %}" style="display: inline-block; background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; margin-bottom: 20px;">Add Contact</a>
{% if contacts %}
    <table border="1" style="border-collapse: collapse; width: 100%; margin-top: 10px;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Address</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for contact in contacts %}
            <tr>
                <td>{{ contact.name }}</td>
                <td>{{ contact.email|default:"No email" }}</td>
                <td>{{ contact.mobile_number|default:contact.work_number|default:contact.home_number|default:"No phone" }}</td>
                <td>{{ contact.address|default:"No address" }}</td>
                <td>
                    <a href="{% url 'contacts:contact_detail' contact.pk %}">View Details</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No contacts found for this business.</p>
{% endif %}

<p><a href="{% url 'contacts:business_list' %}">Back to Businesses List</a></p>
{% endblock %}