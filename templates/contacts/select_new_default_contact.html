{% extends 'base.html' %}

{% block title %}Select New Default Contact - Minibini{% endblock %}

{% block content %}
<h2>Select New Default Contact</h2>

<div style="background-color: #fff3cd; padding: 15px; margin-bottom: 20px; border-radius: 4px; border-left: 4px solid #ffc107;">
    <strong>Deleting Default Contact:</strong> {{ contact.name }}
    <br><strong>Business:</strong> {{ contact.business.business_name }}
</div>

<p style="margin-bottom: 20px;">
    You are about to delete the default contact for this business.
    Please select which contact should become the new default contact.
</p>

<form method="post" action="{% url 'contacts:delete_contact' contact.contact_id %}" style="max-width: 500px;">
    {% csrf_token %}

    <div style="margin-bottom: 20px;">
        <label for="new_default_contact" style="display: block; margin-bottom: 10px; font-weight: bold; font-size: 1.1em;">
            New Default Contact *
        </label>
        <select
            id="new_default_contact"
            name="new_default_contact"
            required
            style="width: 100%; padding: 10px; border: 2px solid #007bff; border-radius: 4px; font-size: 1em;"
        >
            <option value="">-- Select a contact --</option>
            {% for other_contact in other_contacts %}
                <option value="{{ other_contact.contact_id }}">
                    {{ other_contact.name }} - {{ other_contact.email }}
                </option>
            {% endfor %}
        </select>
    </div>

    <div style="margin-top: 30px;">
        <button
            type="submit"
            style="background-color: #dc3545; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; margin-right: 10px;"
        >
            Delete Contact and Set New Default
        </button>
        <a
            href="{% url 'contacts:contact_detail' contact.contact_id %}"
            style="background-color: #6c757d; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;"
        >
            Cancel
        </a>
    </div>
</form>

<script>
// Highlight the selected option
document.getElementById('new_default_contact').addEventListener('change', function() {
    this.style.borderColor = '#28a745';
});
</script>

{% endblock %}
