{% extends 'base.html' %}

{% block title %}Work Order {{ work_order.work_order_id }} - Minibini{% endblock %}

{% block content %}
<h2>Work Order</h2>

<table border="1">
    <tr>
        <th>Field</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Associated Job</td>
        <td><a href="{% url 'jobs:detail' work_order.job.pk %}">{{ work_order.job.job_number }}{% if work_order.job.name %}: {{ work_order.job.name }}{% endif %}</a></td>
    </tr>
    <tr>
        <td>Status</td>
        <td>
            {{ work_order.get_status_display }}
            {% if status_form %}
                <form method="post" style="display: inline; margin-left: 20px;">
                    {% csrf_token %}
                    {{ status_form.status }}
                    <button type="submit" name="update_status">Update Status</button>
                </form>
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>Estimated Time</td>
        <td>{{ work_order.estimated_time|default:"Not specified" }}</td>
    </tr>
</table>

<h3>Tasks</h3>
{% include 'jobs/_task_list.html' %}

<p>
    <a href="{% url 'jobs:work_order_list' %}">Back to Work Orders List</a> |
    <a href="{% url 'jobs:detail' work_order.job.pk %}">View Associated Job</a>
</p>
{% endblock %}