{% extends 'base.html' %}

{% block title %}Estimates - Minibini{% endblock %}

{% block content %}
<h2>All Estimates</h2>

<p>
    <a href="{% url 'jobs:estworksheet_list' %}">Create New Estimate (via Worksheet)</a>
</p>

{% if estimates %}
    <table border="1">
        <tr>
            <th>Estimate Number</th>
            <th>Job</th>
            <th>Version</th>
            <th>Status</th>
            <th>Created</th>
            <th>Sent</th>
            <th>Expiration</th>
            <th>Closed</th>
        </tr>
        {% for estimate in estimates %}
        <tr>
            <td><a href="{% url 'jobs:estimate_detail' estimate.pk %}">{{ estimate.estimate_number }}</a></td>
            <td><a href="{% url 'jobs:detail' estimate.job.pk %}">{{ estimate.job }}</a></td>
            <td>{{ estimate.version }}</td>
            <td>{{ estimate.get_status_display }}</td>
            <td>{{ estimate.created_date|date:"Y-m-d" }}</td>
            <td>{{ estimate.sent_date|date:"Y-m-d"|default:"—" }}</td>
            <td>{{ estimate.expiration_date|date:"Y-m-d"|default:"—" }}</td>
            <td>{{ estimate.closed_date|date:"Y-m-d"|default:"—" }}</td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>No estimates found.</p>
{% endif %}
{% endblock %}