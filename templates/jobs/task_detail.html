{% extends 'base.html' %}

{% block title %}Task {{ task.name }} - Minibini{% endblock %}

{% block content %}
<h2>Task: {{ task.name }}</h2>

<table border="1">
    <tr>
        <th>Field</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Task ID</td>
        <td>{{ task.task_id }}</td>
    </tr>
    <tr>
        <td>Task Name</td>
        <td>{{ task.name }}</td>
    </tr>
    <tr>
        <td>Task Type</td>
        <td>{{ task.task_type }}</td>
    </tr>
    <tr>
        <td>Work Order</td>
        <td>
            {% if task.work_order %}
                <a href="{% url 'jobs:work_order_detail' task.work_order.pk %}">{{ task.work_order }}</a>
            {% else %}
                None
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>Est Worksheet</td>
        <td>
            {% if task.est_worksheet %}
                {{ task.est_worksheet }}
            {% else %}
                None
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>Associated Job</td>
        <td>
            {% if task.work_order %}
                <a href="{% url 'jobs:detail' task.work_order.job.pk %}">{{ task.work_order.job }}</a>
            {% elif task.est_worksheet %}
                <a href="{% url 'jobs:detail' task.est_worksheet.job.pk %}">{{ task.est_worksheet.job }}</a>
            {% else %}
                No job assigned
            {% endif %}
        </td>
    </tr>
    <tr>
        <td>Assigned To</td>
        <td>{{ task.assigned|default:"Unassigned" }}</td>
    </tr>
    <tr>
        <td>Parent Task</td>
        <td>{{ task.parent_task|default:"No parent task" }}</td>
    </tr>
</table>

<p><a href="{% url 'jobs:task_list' %}">Back to Tasks List</a></p>
{% endblock %}