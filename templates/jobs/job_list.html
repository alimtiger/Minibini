{% extends 'base.html' %}

{% block title %}Jobs - Minibini{% endblock %}

{% block content %}
<h2>All Jobs</h2>

{% if jobs %}
    <table border="1">
        <tr>
            <th>Job Number</th>
            <th>Contact</th>
            <th>Status</th>
            <th>Created Date</th>
            <th>Due Date</th>
            <th>Completed Date</th>
            <th>Description</th>
        </tr>
        {% for job in jobs %}
        <tr>
            <td><a href="{% url 'jobs:detail' job.pk %}">{{ job.job_number }}</a></td>
            <td>
                {% if job.contact %}
                    <a href="{% url 'contacts:contact_detail' job.contact.contact_id %}">{{ job.contact.name }}</a>
                {% else %}
                    No contact
                {% endif %}
            </td>
            <td>{{ job.get_status_display }}</td>
            <td>{{ job.created_date|date:"Y-m-d H:i" }}</td>
            <td>{{ job.due_date|date:"Y-m-d"|default:"â€”" }}</td>
            <td>{{ job.completed_date|date:"Y-m-d"|default:"" }}</td>
            <td>{{ job.description|truncatewords:10 }}</td>
        </tr>
        {% endfor %}
    </table>
{% else %}
    <p>No jobs found.</p>
{% endif %}
{% endblock %}